

<!doctype html>
<html lang="en" >
<head>
<link rel='shortcut icon' href='/icon.png' type='image/x-icon'/ >
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>News</title>
<meta name="mobile-web-app-capable" content="yes">

<style>
a:link {    text-decoration: none; color: blue;}
a:visited {    text-decoration: none;color: black;}
a:hover {    text-decoration: underline;}
a:active {    text-decoration: underline;}

</style>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script>
/*! simpleWeather v3.1.0 - http://simpleweatherjs.com */
(function($) {
  'use strict';

  function getAltTemp(unit, temp) {
    if(unit === 'f') {
      return Math.round((5.0/9.0)*(temp-32.0));
    } else {
      return Math.round((9.0/5.0)*temp+32.0);
    }
  }

  $.extend({
    simpleWeather: function(options){
      options = $.extend({
        location: '',
        woeid: '',
        unit: 'f',
        success: function(weather){},
        error: function(message){}
      }, options);

      var now = new Date();
      var weatherUrl = 'https://query.yahooapis.com/v1/public/yql?format=json&rnd=' + now.getFullYear() + now.getMonth() + now.getDay() + now.getHours() + '&diagnostics=true&callback=?&q=';

      if(options.location !== '') {
        /* If latitude/longitude coordinates, need to format a little different. */
        var location = '';
        if(/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/.test(options.location)) {
          location = '(' + options.location + ')';
        } else {
          location = options.location;
        }

        weatherUrl += 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="' + location + '") and u="' + options.unit + '"';
      } else if(options.woeid !== '') {
        weatherUrl += 'select * from weather.forecast where woeid=' + options.woeid + ' and u="' + options.unit + '"';
      } else {
        options.error('Could not retrieve weather due to an invalid location.');
        return false;
      }

      $.getJSON(
        encodeURI(weatherUrl),
        function(data) {
          if(data !== null && data.query !== null && data.query.results !== null && data.query.results.channel.description !== 'Yahoo! Weather Error') {
            var result = data.query.results.channel,
                weather = {},
                forecast,
                compass = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW', 'N'],
                image404 = 'https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png';

            weather.title = result.item.title;
            weather.temp = result.item.condition.temp;
            weather.code = result.item.condition.code;
            weather.todayCode = result.item.forecast[0].code;
            weather.currently = result.item.condition.text;
            weather.high = result.item.forecast[0].high;
            weather.low = result.item.forecast[0].low;
            weather.text = result.item.forecast[0].text;
            weather.humidity = result.atmosphere.humidity;
            weather.pressure = result.atmosphere.pressure;
            weather.rising = result.atmosphere.rising;
            weather.visibility = result.atmosphere.visibility;
            weather.sunrise = result.astronomy.sunrise;
            weather.sunset = result.astronomy.sunset;
            weather.description = result.item.description;
            weather.city = result.location.city;
            weather.country = result.location.country;
            weather.region = result.location.region;
            weather.updated = result.item.pubDate;
            weather.link = result.item.link;
            weather.units = {temp: result.units.temperature, distance: result.units.distance, pressure: result.units.pressure, speed: result.units.speed};
            weather.wind = {chill: result.wind.chill, direction: compass[Math.round(result.wind.direction / 22.5)], speed: result.wind.speed};

            if(result.item.condition.temp < 80 && result.atmosphere.humidity < 40) {
              weather.heatindex = -42.379+2.04901523*result.item.condition.temp+10.14333127*result.atmosphere.humidity-0.22475541*result.item.condition.temp*result.atmosphere.humidity-6.83783*(Math.pow(10, -3))*(Math.pow(result.item.condition.temp, 2))-5.481717*(Math.pow(10, -2))*(Math.pow(result.atmosphere.humidity, 2))+1.22874*(Math.pow(10, -3))*(Math.pow(result.item.condition.temp, 2))*result.atmosphere.humidity+8.5282*(Math.pow(10, -4))*result.item.condition.temp*(Math.pow(result.atmosphere.humidity, 2))-1.99*(Math.pow(10, -6))*(Math.pow(result.item.condition.temp, 2))*(Math.pow(result.atmosphere.humidity,2));
            } else {
              weather.heatindex = result.item.condition.temp;
            }

            if(result.item.condition.code == '3200') {
              weather.thumbnail = image404;
              weather.image = image404;
            } else {
              weather.thumbnail = 'https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/' + result.item.condition.code + 'ds.png';
              weather.image = 'https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/' + result.item.condition.code + 'd.png';
            }

            weather.alt = {temp: getAltTemp(options.unit, result.item.condition.temp), high: getAltTemp(options.unit, result.item.forecast[0].high), low: getAltTemp(options.unit, result.item.forecast[0].low)};
            if(options.unit === 'f') {
              weather.alt.unit = 'c';
            } else {
              weather.alt.unit = 'f';
            }

            weather.forecast = [];
            for(var i=0;i<result.item.forecast.length;i++) {
              forecast = result.item.forecast[i];
              forecast.alt = {high: getAltTemp(options.unit, result.item.forecast[i].high), low: getAltTemp(options.unit, result.item.forecast[i].low)};

              if(result.item.forecast[i].code == "3200") {
                forecast.thumbnail = image404;
                forecast.image = image404;
              } else {
                forecast.thumbnail = 'https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/' + result.item.forecast[i].code + 'ds.png';
                forecast.image = 'https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/' + result.item.forecast[i].code + 'd.png';
              }

              weather.forecast.push(forecast);
            }

            options.success(weather);
          } else {
            options.error('There was a problem retrieving the latest weather information.');
          }
        }
      );
      return this;
    }
  });
})(jQuery);
</script>



<script type="text/javascript">
    function toggle_visibility(id) {

	   var e = document.getElementById(id);
       if(e.style.display == 'inline')
          e.style.display = 'none';
       else
          e.style.display = 'inline';
    }

function strip(html)
{
   var tmp = document.createElement("DIV");
   tmp.innerHTML = html;
   return tmp.textContent||tmp.innerText;
}

</script> 

<script type="text/javascript">

var aarticles = [
["https://api.breakingnews.com/api/v1/item/?format=rss","Breaking News","news"],
["http://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml","New York Times","news"],
["http://lens.blogs.nytimes.com/feed/","New York Times - Lens","news"],
["http://www.wsj.com/xml/rss/3_7085.xml","Wall Street Journal","markets"],
["http://www.ft.com/rss/home/us","Financial Times","markets"],
["http://www.ft.com/rss/lex","Financial Times - Lex","markets"],
["http://rss.lemonde.fr/c/205/f/3050/index.rss","Le Monde","news"],
["http://piketty.blog.lemonde.fr/feed/","Thomas Piketty's blog","news"],
["http://www.laviedesidees.fr/spip.php?page=backend","La vie des idees","periodics"],
["http://www.latimes.com/rss2.0.xml","Los Angeles Times","news"],
["http://www.theage.com.au/rssheadlines/top.xml","The Age","periodics"],
["http://feeds.reuters.com/ReutersPictures","Reuters Pictures","news"],
["http://longform.org/feed.rss","Long Form","periodics"],
["http://feeds.feedburner.com/TheAtlantic","The Atlantic","periodics"],
["http://fusion.net/feed/","Fusion","periodics"],
["http://www.newyorker.com/feed/everything","The New Yorker","periodics"],
["http://feeds.feedburner.com/nybooks","The New York review of Books","bookreviews"],
["http://cdn.lrb.co.uk/feeds/lrb","The London review of Books","bookreviews"],
["http://feeds2.feedburner.com/PhilosophicalReviews/News","Philosophical Reviews","bookreviews"],
["http://harpers.org/feed/","Harpers Magazine","periodics"],
["http://feeds.feedburner.com/motherjones/BlogsAndArticles","Mother Jones","blogs"],
["https://www.quantamagazine.org/feed/","Quanta Magazine","science"],
["http://www.symmetrymagazine.org/feed","Symmetry Magazine","science"],
["https://www.edge.org/feed","Edge Magazine","periodics"],
["http://export.arxiv.org/rss/q-fin","ArXiv","markets"],
["http://www.bloombergview.com/rss/contributors/matt-levine.rss","Bloomberg - Matt Levine","markets"],
["http://www.bloombergview.com/rss/contributors/the-editors.rss","Bloomberg - The Editors","markets"],
["https://www.project-syndicate.org/rss","Project Syndicate","news"],
["http://feeds.benzinga.com/benzinga/news","Benziga","markets"],
["https://googleblog.blogspot.ch/feeds/posts/default?alt=rss","Google Blog","blogs"],
["http://www.gatesnotes.com/rss","Gates notes","blogs"],
["http://www.salon.com/feed/","Salon","periodics"],
["https://theintercept.com/feed/?rss","The Intercept","periodics"],
["http://feeds.feedburner.com/zerohedge/feed","ZeroHedge","markets"],
["http://www.vanityfair.com/news/rss","VanityFair","periodics"],
["https://sniperinmahwah.wordpress.com/feed/","Sniper in Mahwah","markets"]



]

var a = aarticles;
var alinks = aarticles.map(function(value,index) { return value[0]; });

google.load("feeds", "1");
function create(htmlStr)
{
var frag = document.createDocumentFragment(),
temp = document.createElement('div');
temp.innerHTML = htmlStr;
while (temp.firstChild) 
	{
        frag.appendChild(temp.firstChild);
    	}
return frag;
}
function initialize() 
{
var topnews = 0
var maintitle = 0
var idsection = 0
for (var z in a) {
	
	var rssadress = a[z][0]
	var feed = new google.feeds.Feed(rssadress);
	feed.setNumEntries(15);
	feed.load(function(result) 
	{
	if (!result.error) 
        {
		var container = document.getElementById("feed");
			maintitle = 0
			divdest = a[alinks.indexOf(result.feed.feedUrl)][2]
			document.getElementById(divdest).innerHTML+= '<div id="srch-' + idsection + '" style="display: none">'
			document.getElementById(divdest).innerHTML+= ' [<b><a href="#srch-' + idsection + '" onclick="toggle_visibility(' + idsection + ');">' + a[alinks.indexOf(result.feed.feedUrl)][1] + '</a></b>] </div>'
			document.getElementById(divdest+'-child').innerHTML+= '<div id="' + idsection + '" style="display: none"><br><i>'+ a[alinks.indexOf(result.feed.feedUrl)][1] + '</i><br></div>'
			idsection += 1
			for (var i = 0; i < result.feed.entries.length; i++) 
				{
				var entry = result.feed.entries[i];
				if(maintitle == 0)
					{
					document.getElementById('subh-'+divdest).innerHTML+= ' &#9900; <a href="'+entry.link+'">'+ entry.title+ '</a>'
					maintitle = 1
					}
				if (topnews == 0)
					{
					document.getElementById('topnews').innerHTML+= '<h1><a href="'+entry.link+'">'+ entry.title+ '</a></h1>'
					topnews = 1
					}

					var mysnippet = strip(entry.content)
					if (mysnippet.length < 500)
						{
						document.getElementById(idsection-1).innerHTML+= '<a href="'+entry.link+'"> &#9900; '+entry.title+' </a><i><font color="grey">'+mysnippet+'</font></i><br>'
						} else {
						mysnippettrunc = mysnippet.substring(0, 500)
						mysnippettend = mysnippet.substring(500, (mysnippet.length-500+1))
						var mydivid = idsection*1000+i
						document.getElementById(idsection-1).innerHTML+= '<a href="'+entry.link+'"> &#9900; '+entry.title+' </a><i><font color="grey">'+mysnippettrunc+'<a href="#' + mydivid + '" onclick="toggle_visibility('+mydivid+');">[...]</a><div id="' + mydivid + '" style="display: none"></div></font></i><br>'
						document.getElementById(mydivid).innerHTML+=mysnippettend
						
						
						
						}
					
					
				}
		}
	}
)}
;
}
google.setOnLoadCallback(initialize);
</script>
<script>
$(document).ready(function() {
var wthloc = ['782538','615702','2459115','2423945']
for (var loopwth in wthloc) 
	{
	var mywoeid = wthloc[loopwth]
	$.simpleWeather({
	zipcode: '',woeid: mywoeid,location: '',unit: 'c',success: function(weather) 
		{
		html = '&#9900 <b> '+weather.city+'</b>';
		html += ' '+weather.temp+'&deg;'+weather.units.temp+' ';
		html += ''+weather.currently+' ';
		document.getElementById("weather").innerHTML+= html;
		},
	});
	}
});
</script>

<script>
var symbols = ['SPY', '^FTSE', '^STOXX50E', '^N225'],
    properties = [{
        classname: 'name',
        property: 'Name'
    }, {
        classname: 'resultsets',
        property: 'LastTradePriceOnly'
    }, {
        classname: 'changepercent',
        property: 'PercentChange'
    }];

function buildElement(quote) {
    var container = $("<span> &#9900 </span>").addClass("symbol");
    properties.forEach(function (prop) {
        var child = $("<span></span>").addClass(prop.classname);
        child.text(quote[prop.property]+" ");
        container.append(child);
    });
    
    return container;
}

$.getJSON("http://query.yahooapis.com/v1/public/yql", {
    format: "json",
    diagnostics: "true",
    env: "http://datatables.org/alltables.env",
    q: "select * from yahoo.finance.quotes where symbol in ('" + symbols.join("','") + "')"
}, function (data, xhr, status) {
    // do some sanity checking of the data here
    var elements = data.query.results.quote.map(buildElement);
    $("#indices").append(elements);
});


</script>

<script>

    function showall() {


var divs = document.getElementsByTagName("div");
for(var b = 0; b < divs.length; b++){
   //do something to each div like
  
	if (isNaN(divs[b].id) == false )
		{
		if (divs[b].id <= (aarticles.length+1))
		{
			divs[b].style.display = 'inline'; 
		}
		}
}
}

 function hideall() {


var divs = document.getElementsByTagName("div");
for(var b = 0; b < divs.length; b++){
   //do something to each div like
  
	if (isNaN(divs[b].id) == false )
		{
		if (divs[b].id <= (aarticles.length+1))
		{
			divs[b].style.display = 'none'; 
		}
		}
}
}


</script>

</head>
<body>

<div id="weather"><b>WEATHER </b></div><br>
<div id="indices"><b>QUOTES </b></div><br>

<div id="topnews"></div>

<a href="#showall" onclick="showall();">[Show]</a> <a href="#hideall" onclick="hideall();">[Hide]</a>
<br>
<br>


  	<div id="subh-news"><b><a href="#subh-news" onclick="toggle_visibility('news');">NEWSPAPERS</a></b></div>
	<div id="news"></div>
	<div id="news-child"></div>
	
	<div id="subh-markets"><br><b><a href="#subh-markets" onclick="toggle_visibility('markets');">MARKETS</a></b></div>
	<div id="markets"></div>
	<div id="markets-child"></div>	
	
	<div id="subh-periodics"><br><b><a href="#subh-periodics" onclick="toggle_visibility('periodics');">MAGAZINES</a></b></div>
	<div id="periodics"></div>
	<div id="periodics-child"></div>
	
	<div id="subh-bookreviews"><br><b><a href="#subh-bookreviews" onclick="toggle_visibility('bookreviews');">BOOKS</a></b></div>
	<div id="bookreviews"></div>
	<div id="bookreviews-child"></div>
	
	<div id="subh-science"><br><b><a href="#subh-science" onclick="toggle_visibility('science');">SCIENCE</a></b></div>
	<div id="science"></div>
	<div id="science-child"></div>
	
	<div id="subh-blogs"><br><b><a href="#subh-blogs" onclick="toggle_visibility('blogs');">BLOGS</a></b></div>
	<div id="blogs"></div>
	<div id="blogs-child"></div>


</body>
</html>
