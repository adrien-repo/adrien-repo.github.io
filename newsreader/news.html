<!doctype html>
<html lang="en" >
<head>
<link rel='shortcut icon' href='/icon.png' type='image/x-icon'/ >
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>News</title>
<meta name="mobile-web-app-capable" content="yes">

<style>
a:link {    text-decoration: none; color: black;}
a:visited {    text-decoration: none;color: black;}
a:hover {    text-decoration: underline;}
a:active {    text-decoration: underline;}
header{     font-size: 20px;    text-transform: uppercase;    line-height: 30px;    margin-bottom: 5px;}
.subhead{    text-transform: uppercase;    border-bottom: 1px solid;    border-top: 1px solid;    padding: 5px 0 5px 0;	margin-bottom: 5px;}
.photosday{  font-size: 12px;  border-bottom: 1px solid;    padding: 5px 0 5px 0;	margin-bottom: 5px;}
.collumn{	width: 340px;    display: inline-block;    vertical-align: top;    margin-bottom: 5px;	margin-right: 5px;    background-color:#F9F9F9}
</style>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="jquery.simpleWeather.js"></script>

<script type="text/javascript">
var a = [
"https://api.breakingnews.com/api/v1/item/?format=rss",
"http://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml",
"http://lens.blogs.nytimes.com/feed/",
"http://www.wsj.com/xml/rss/3_7085.xml",
"http://rss.lemonde.fr/c/205/f/3050/index.rss",
"http://www.latimes.com/rss2.0.xml",
"http://www.theage.com.au/rssheadlines/top.xml",
"http://feeds.reuters.com/ReutersPictures",
"http://longform.org/feed.rss",
"http://feeds.feedburner.com/TheAtlantic",
"http://fusion.net/feed/",
"http://www.newyorker.com/feed/everything",
"http://feeds.feedburner.com/nybooks",
"http://harpers.org/feed/",
"http://feeds.feedburner.com/motherjones/BlogsAndArticles",
"https://www.quantamagazine.org/feed/",
"http://www.symmetrymagazine.org/feed",
"https://www.edge.org/feed",
"http://export.arxiv.org/rss/q-fin",
"http://www.bloombergview.com/rss/contributors/matt-levine.rss",
"http://www.bloombergview.com/rss/contributors/the-editors.rss",
"http://www.euromoney.com/RSS.aspx?FeedID=13",
"http://feeds.benzinga.com/benzinga/news",
"http://feeds.feedburner.com/MisesDailyArticles",
"https://googleblog.blogspot.ch/feeds/posts/default?alt=rss",
"http://www.reddit.com/r/longform/hot/.rss",

"http://widget.websta.me/rss/n/afpphoto"
]
google.load("feeds", "1");
function create(htmlStr)
{
var frag = document.createDocumentFragment(),
temp = document.createElement('div');
temp.innerHTML = htmlStr;
while (temp.firstChild) 
	{
        frag.appendChild(temp.firstChild);
    	}
return frag;
}
function initialize() 
{
var maintitle = 0
for (var i in a) {
	var rssadress = a[i]
	
	var feed = new google.feeds.Feed(rssadress);
	feed.setNumEntries(15);
	feed.load(function(result) 
	{
	if (!result.error) 
        {
		var container = document.getElementById("feed");
		if (result.feed.title == '@afpphoto - WEBSTA')
			{
			
			for (var i = 0; i < result.feed.entries.length; i++)
				{
				var entry = result.feed.entries[i];
				if (i < 5)
					{
					var str = entry.content 
					str = str.substring(str.indexOf("<img") + 1); // kick logo
					str = str.substring(str.indexOf("<img") + 1); //start url
					str = str.substring(0,str.indexOf(">") + 1); // end url
					str = '<'+str
					
					strtxt = entry.title
					strtxt = strtxt.substring(strtxt.indexOf(" ") + 1); // kick header
					strtxt = strtxt.substring(strtxt.indexOf(" ") + 1); // kick header
					if (strtxt.indexOf("#") > 50) 
						{strtxt = strtxt.substring(0,strtxt.indexOf("#"))}; // kick end hashtags
					if (strtxt.indexOf("@") > 50) 
						{strtxt = strtxt.substring(0,strtxt.indexOf("@"))}; // kick end hashtags
					
					document.getElementById("photooftheday").innerHTML+=  '<div class="collumn"><center>'+str+'</center><br>'+ strtxt + '</div>'
					}
				}
			
			
			} else {
					

				document.getElementById("content").innerHTML+= '<div class="subhead" id="' + result.feed.title + '"><b><a href="#top">'+result.feed.title+'</a></b><div>'
				for (var i = 0; i < result.feed.entries.length; i++) 
					{
					var entry = result.feed.entries[i];
					if(maintitle == 0)
					{
					document.getElementById("breakingnews").innerHTML+= '<b><h1>'+entry.title+'</h1></b>'
					maintitle = 1
					}
					if (i == 0)
					{
					document.getElementById("headlines").innerHTML+= '<div class="collumn"><a href="#' + result.feed.title + '">'+result.feed.title+'</a><br><b><a href="'+entry.link+'">'+entry.title+'</a></b><br>'+entry.contentSnippet+'</div>'
					}
					document.getElementById("content").innerHTML+= '<a href="'+entry.link+'">'+entry.title+'</a><font color="grey"> '+entry.contentSnippet+'</font><br>'
					}
				document.getElementById("content").innerHTML+= '<br>'
			}
			
		}
	}
)}
;
}
google.setOnLoadCallback(initialize);
</script>
<script>
$(document).ready(function() {
var wthloc = ['782538','615702','2459115','2423945']
for (var loopwth in wthloc) 
	{
	var mywoeid = wthloc[loopwth]
	$.simpleWeather({
	zipcode: '',woeid: mywoeid,location: '',unit: 'c',success: function(weather) 
		{
		html = '<b>'+weather.city+'</b>';
		html += ' '+weather.temp+'&deg;'+weather.units.temp+' ';
		html += ''+weather.currently+' ';
		document.getElementById("weather").innerHTML+= html;
		},
	});
	}
});
</script>
</head>
<body>

<div id="weather"></div>
  <div class="subhead"><div id="breakingnews"></div></div>
  <div class="photosday"><div id="photooftheday"></div></div>
	<div id="headlines"></div>
<br>
<br>
<div id="content"></div>
</body>
</html>
